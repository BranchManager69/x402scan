---
title: x402 Overview
description: How the x402 protocol works
---

import { Architecture } from '../../components/x402-sequence';
import { TypeTable } from 'fumadocs-ui/components/type-table';

## Architecture

The x402 protocol is a new open payment protocol developed by Coinbase that enables instant, automatic stablecoin payments directly over HTTP.

The following sequence diagram illustrates the typicaly workflow of an x402 transaction.

<Architecture />

## Roles

There are three main players in an x402 workflow:

- **Client**: The entity that is making a request to access a paid resource
- **Server**: The entity that is hosting a paid resource
- **Facilitator**: The entity that verifies a client's payment and settles the payment to the server

## Workflow

1. The **client** makes a request to the **server**, typically **without a payment header**.
2. The **server** returns a 402 Payment Required response with instructions on how to pay.
3. The **client** constructs a payment signature and makes the same request with the payment header.
4. The **server** requests the **facilitator** to verify the payment via the `POST /verify` endpoint.
5. The **facilitator** verifies the payment and returns a 200 OK response. If the payment is not valid, the **facilitator** returns an error
6. The **server** settles the payment to the **client** via the `POST /settle` endpoint.
7. The **facilitator** confirms settlement to the **server**.
8. The **server** returns the protected resource to the **client**.

## x402 response

When a **cleint** requests a protected resource without a `X-PAYMENT_HEADER` header, the **server** returns a 402 Payment Required response with instructions on how to pay:

```ts
type X402Response = {
  x402Version: number;
  error?: string;
  accepts?: Accepts[];
};

type Accepts = {
  scheme: string;
  network: string;
  maxAmountRequired: string;
  resource: string;
  description: string;
  mimeType: string;
  payTo: string;
  maxTimeoutSeconds: number;
  asset: string;
  outputSchema?: object;
  extra?: object;
};
```
